<body class="hold-transition skin-blue sidebar-mini">
<%= render 'layouts/header' %>
<div class="content-wrapper">

  <!-- Content Header (Page header) -->
  <section class="content-header">
    <h1>
      <%= @campaign.id ? 'Edit' : 'Add' %> Group
    </h1>
  </section>

  <!-- Main content -->
  <section class="content">
    <div class="row">
      <div class="col-md-12">
        <div class="box box-header">
          <div class="box-header with-border">
            <h3 class="box-title">Basic Information</h3>
          </div>
          <div class="col-md-12">
            <%= form_for(@campaign) do |f| %>
              <% if @campaign.errors.any? %>
                <div id="error_explanation">
                  <h2><%= pluralize(@campaign.errors.count, "error") %> prohibited this campaign from being saved:</h2>

                  <ul>
                  <% @campaign.errors.full_messages.each do |message| %>
                    <li><%= message %></li>
                  <% end %>
                  </ul>
                </div>
              <% end %>

              <div class="box-body">
                <div class="form-group col-md-12">
                  <label for="send_at">Campaign Subject</label>
                  <%= f.text_field :subject, class: "form-control", autocomplete: "off" %>
                </div>

                <div class="form-group col-md-6">
                  <label for="user_select">Selected Group</label>
                  <%= collection_select :campaign, :group_id, @groups, :id, ->(user) { "#{user.name}" }, { prompt: "Please select a campaign" }, { class: 'form-control', id: 'campaign_select' } %>
                </div>                

                <div class="form-group col-md-6">
                  <label for="send_at">Schedule At / Send At</label>
                  <%= f.text_field :send_at, class: "form-control", id: "send_at", autocomplete: "off" %>
                </div>
              </div>

              <div class="box-body">
                <div class="form-group col-md-12">
                  <label>Email Body</label>
                  <%= f.text_area :body, autocomplete: "off", placeholder: "Enter Email Body", class: "tinymce form-control", required: true, rows: 10, cols: 100 %>
                  <%= tinymce %>
                </div>
             
                <div class="box-footer  col-md-12">
                  <%= f.submit "Submit", class: "btn btn-primary"%>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </section>

</div>
<%= render 'layouts/footer' %>


<script src="https://cdn.jsdelivr.net/npm/jquery-datetime-picker@2.5.11/build/jquery.datetimepicker.full.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-datetime-picker@2.5.11/jquery.datetimepicker.min.css">
</body>

<script>
  // Ensure jQuery is ready
  $(document).ready(function() {
    $('#send_at').datetimepicker({
        format: 'Y-m-d H:i',
        step: 15, // Set minute increment to 15 minutes
        defaultDate: false // Ensure no default date is selected
      });
  });
</script>
<script type="text/javascript">
  tinymce.init({
    selector: 'textarea.editor'
  });
</script>